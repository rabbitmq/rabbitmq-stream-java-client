<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) on Mon May 27 13:39:13 UTC 2024 -->
<title>ConsumerFlowStrategy (RabbitMQ Stream Java Client 0.16.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2024-05-27">
<meta name="description" content="declaration: package: com.rabbitmq.stream, interface: ConsumerFlowStrategy">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/ConsumerFlowStrategy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.rabbitmq.stream</a></div>
<h1 title="Interface ConsumerFlowStrategy" class="title">Interface ConsumerFlowStrategy</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="ConsumerFlowStrategy.CreditOnChunkArrivalConsumerFlowStrategy.html" title="class in com.rabbitmq.stream">ConsumerFlowStrategy.CreditOnChunkArrivalConsumerFlowStrategy</a></code>, <code><a href="ConsumerFlowStrategy.MessageCountConsumerFlowStrategy.html" title="class in com.rabbitmq.stream">ConsumerFlowStrategy.MessageCountConsumerFlowStrategy</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public interface </span><span class="element-name type-name-label">ConsumerFlowStrategy</span></div>
<div class="block">Contract to determine when a subscription provides credits to get more messages.

 <p>The broker delivers "chunks" of messages to consumers. A chunk can contain from 1 to several
 thousands of messages. The broker send chunks as long as the subscription has <em>credits</em>. A
 client connection can provide credits for a given subscription and the broker will send the
 corresponding number of chunks (1 credit = 1 chunk).

 <p>This credit mechanism avoids overwhelming a consumer with messages. A consumer does not want
 to provide a credit only when it is done with messages of a chunk, because it will be idle
 between its credit request and the arrival of the next chunk. The idea is to keep consumers busy
 as much as possible, without accumulating an in-memory backlog on the client side. There is no
 ideal solution, it depends on the use cases and several parameters (processing time, network,
 etc).

 <p>This is an experimental API, subject to change.</div>
<dl class="notes">
<dt>Since:</dt>
<dd>0.12.0</dd>
<dt>See Also:</dt>
<dd>
<ul class="tag-list-long">
<li><a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a></li>
<li><a href="ConsumerBuilder.html#flow()"><code>ConsumerBuilder.flow()</code></a></li>
</ul>
</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Interface</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ConsumerFlowStrategy.Context.html" class="type-name-link" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy.Context</a></code></div>
<div class="col-last even-row-color">
<div class="block">Chunk context.</div>
</div>
<div class="col-first odd-row-color"><code>static class&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="ConsumerFlowStrategy.CreditOnChunkArrivalConsumerFlowStrategy.html" class="type-name-link" title="class in com.rabbitmq.stream">ConsumerFlowStrategy.CreditOnChunkArrivalConsumerFlowStrategy</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Strategy that provides the specified number of initial credits and a credit on each new chunk.</div>
</div>
<div class="col-first even-row-color"><code>static class&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="ConsumerFlowStrategy.MessageCountConsumerFlowStrategy.html" class="type-name-link" title="class in com.rabbitmq.stream">ConsumerFlowStrategy.MessageCountConsumerFlowStrategy</a></code></div>
<div class="col-last even-row-color">
<div class="block">Strategy that provides the specified number of initial credits and a credit when the specified
 ratio of the chunk messages are processed.</div>
</div>
<div class="col-first odd-row-color"><code>static interface&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="ConsumerFlowStrategy.MessageProcessedCallback.html" class="type-name-link" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy.MessageProcessedCallback</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Behavior for <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a> calls.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#creditOnChunkArrival()" class="member-name-link">creditOnChunkArrival</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Strategy that provides 1 initial credit and a credit on each new chunk.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#creditOnChunkArrival(int)" class="member-name-link">creditOnChunkArrival</a><wbr>(int&nbsp;initialCredits)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Strategy that provides the specified number of initial credits and a credit on each new chunk.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#creditOnProcessedMessageCount(int,double)" class="member-name-link">creditOnProcessedMessageCount</a><wbr>(int&nbsp;initialCredits,
 double&nbsp;ratio)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Strategy that provides the specified number of initial credits and a credit when the specified
 ratio of the chunk messages are processed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1"><code><a href="#creditWhenHalfMessagesProcessed()" class="member-name-link">creditWhenHalfMessagesProcessed</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1">
<div class="block">Strategy that provides 1 initial credit and a credit when half of the chunk messages are
 processed.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1"><code>static <a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1"><code><a href="#creditWhenHalfMessagesProcessed(int)" class="member-name-link">creditWhenHalfMessagesProcessed</a><wbr>(int&nbsp;initialCredits)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1">
<div class="block">Strategy that provides the specified number of initial credits and a credit when half of the
 chunk messages are processed.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#initialCredits()" class="member-name-link">initialCredits</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">The initial number of credits for a subscription.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="ConsumerFlowStrategy.MessageProcessedCallback.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy.MessageProcessedCallback</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#start(com.rabbitmq.stream.ConsumerFlowStrategy.Context)" class="member-name-link">start</a><wbr>(<a href="ConsumerFlowStrategy.Context.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy.Context</a>&nbsp;context)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">
<div class="block">Return the behavior for <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a> calls.</div>
</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="initialCredits()">
<h3>initialCredits</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">initialCredits</span>()</div>
<div class="block">The initial number of credits for a subscription.

 <p>It must be greater than 0. Values are usually between 1 and 10.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>initial number of credits</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="start(com.rabbitmq.stream.ConsumerFlowStrategy.Context)">
<h3>start</h3>
<div class="member-signature"><span class="return-type"><a href="ConsumerFlowStrategy.MessageProcessedCallback.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy.MessageProcessedCallback</a></span>&nbsp;<span class="element-name">start</span><wbr><span class="parameters">(<a href="ConsumerFlowStrategy.Context.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy.Context</a>&nbsp;context)</span></div>
<div class="block">Return the behavior for <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a> calls.

 <p>This method is called for each chunk of messages. Implementations return a callback that
 will be called when applications consider a message dealt with and call <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a>. The callback can count messages and provide credits
 accordingly.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>context</code> - chunk context</dd>
<dt>Returns:</dt>
<dd>the message processed callback</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="creditOnChunkArrival()">
<h3>creditOnChunkArrival</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></span>&nbsp;<span class="element-name">creditOnChunkArrival</span>()</div>
<div class="block">Strategy that provides 1 initial credit and a credit on each new chunk.

 <p>Calls to <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a> are ignored.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>flow strategy</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="creditOnChunkArrival(int)">
<h3>creditOnChunkArrival</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></span>&nbsp;<span class="element-name">creditOnChunkArrival</span><wbr><span class="parameters">(int&nbsp;initialCredits)</span></div>
<div class="block">Strategy that provides the specified number of initial credits and a credit on each new chunk.

 <p>Calls to <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a> are ignored.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>initialCredits</code> - number of initial credits</dd>
<dt>Returns:</dt>
<dd>flow strategy</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="creditWhenHalfMessagesProcessed()">
<h3>creditWhenHalfMessagesProcessed</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></span>&nbsp;<span class="element-name">creditWhenHalfMessagesProcessed</span>()</div>
<div class="block">Strategy that provides 1 initial credit and a credit when half of the chunk messages are
 processed.

 <p>Make sure to call <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a> on every message when using
 this strategy, otherwise the broker may stop sending messages to the consumer.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>flow strategy</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="creditWhenHalfMessagesProcessed(int)">
<h3>creditWhenHalfMessagesProcessed</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></span>&nbsp;<span class="element-name">creditWhenHalfMessagesProcessed</span><wbr><span class="parameters">(int&nbsp;initialCredits)</span></div>
<div class="block">Strategy that provides the specified number of initial credits and a credit when half of the
 chunk messages are processed.

 <p>Make sure to call <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a> on every message when using
 this strategy, otherwise the broker may stop sending messages to the consumer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>initialCredits</code> - number of initial credits</dd>
<dt>Returns:</dt>
<dd>flow strategy</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="creditOnProcessedMessageCount(int,double)">
<h3>creditOnProcessedMessageCount</h3>
<div class="member-signature"><span class="modifiers">static</span>&nbsp;<span class="return-type"><a href="ConsumerFlowStrategy.html" title="interface in com.rabbitmq.stream">ConsumerFlowStrategy</a></span>&nbsp;<span class="element-name">creditOnProcessedMessageCount</span><wbr><span class="parameters">(int&nbsp;initialCredits,
 double&nbsp;ratio)</span></div>
<div class="block">Strategy that provides the specified number of initial credits and a credit when the specified
 ratio of the chunk messages are processed.

 <p>Make sure to call <a href="MessageHandler.Context.html#processed()"><code>MessageHandler.Context.processed()</code></a> on every message when using
 this strategy, otherwise the broker may stop sending messages to the consumer.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>initialCredits</code> - number of initial credits</dd>
<dt>Returns:</dt>
<dd>flow strategy</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2024 <a href="https://www.rabbitmq.com">Broadcom Inc. and/or its subsidiaries</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
